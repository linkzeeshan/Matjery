var ReverseInfiniteScroll=function(){var n,l,e={init:r,reset:f,createEmptySpaceFillContainer:d,activateReverseInfiniteScroll:p},t=!1,a=".nop7SpikesAjaxFiltersGrid .item-box",o=".item-box.dummy-box",s=!1,i=!0,c=ajaxFiltersHistory.state().scrollPosition;function r(){n=ajaxFiltersHistory.state().visiblePage?ajaxFiltersHistory.state().visiblePage:1,$(window).on("scroll.reverseInfiniteScrollInit",function(){$(window).scrollTop();t||(t=!0,scrollTimer=setTimeout(function(){u(),t=!1},250)),t&&clearTimeout(scrollTimer),scrollTimer=setTimeout(function(){scrollTimer=null,u(),p(),ajaxFiltersHistory.setScrollPosition($(window).scrollTop()),t=!1},300)}),$(document).off("nopAjaxFiltersFiltrationCompleteEvent.reverseInfiniteScrollInit"),$(document).on("nopAjaxFiltersFiltrationCompleteEvent.reverseInfiniteScrollInit",function(e){e.isTriggeredByInfiniteScroll||i||f(),d(),u(),p(),i=!1}),$(document).ready(function(){l=parseInt($(".productsPageSizeDropDown").val()||$(".nop7SpikesAjaxFiltersGrid .item-box").length),1==n&&(s=!0)})}function f(){t=!1,s=!(a=".nop7SpikesAjaxFiltersGrid .item-box"),_previousHash=window.location.hash,_isPreviousRequestFiltration=!1,i=!0,ajaxFiltersHistory.resetState(),r()}function u(){if(s){for(var e=$(a),t=e.filter(function(){return e=$(this),t=$(e).offset().top,i=t+$(e).outerHeight(),r=$(window).scrollTop(),e=r+$(window).height(),r<i&&t<e;var e,t,i,r}).last(),i=0,i=0;i<e.length;i++)if($(e.get(i)).is(t))break;n=Math.ceil(i/l),ajaxFiltersHistory.setVisiblePage(n)}}function d(){if(!s){for(var e=!1,t=$(".ajaxBusyPanelParent .item-grid"),i=n-1;0<i;i--)for(var r=function(e){var t=$(a).first().clone();$(t).find(".product-title").empty(),$(t).find(".prices").empty,$(t).find(".description").empty(),$(t).find(".picture a").removeAttr("href"),$(t).find(".picture a img").removeAttr("src"),$(t).addClass("dummy-box"),$(t).attr("data-pageNumber",e);e=document.createElement("div");return e.appendChild(t.get(0)),e.innerHTML}(i),o=0;o<l;o++)t.prepend(r),e=!0;e&&setTimeout(function(){$("html, body").animate({scrollTop:c},0)},500),s=!0}}function p(){if(0!==l)for(var e=$(o),t=l-1;t<e.length;t+=l){var i=e.get(t),r=$(i).offset().top+$(i).outerHeight(!0)+150;$(window).scrollTop()<r+150&&(_reverseInfiniteScrollTriggered=!0,i=$(i).attr("data-pageNumber"),filterManager.executeReverseInfiniteScroll(i))}}return e};